## URL 字符转义的几种方式

前端向后端发起 get 请求时，可能会携带一些特殊字符或者中文参数等，但由于标准 URL 规范，是不允许出现中文以及特殊字符的，可能会导致后端截取参数失败，所以需要提前对 URL 里的特殊字符或者中文字符进行转义，以下分享几种转义字符以及解析字符的几种方式。

## 常用特殊字符

在了解转义以及解析方式时，我们先了解下在 URL 中常用的几种特殊字符以及特殊字符转义后对应的值。

| 符号 | 解释                   | 转义 |
| ---- | ---------------------- | ---- |
| #    | 用来标志特定的文档位置 | %23  |
| %    | 对特殊字符进行编码     | %25  |
| &    | 分隔不同的变量值对     | %26  |
| +    | 在变量值中表示空格     | %2B  |
| /    | 表示目录路径           | %2F  |
| \    | 表示目录路径           | %5C  |
| =    | 用来连接键和值         | %3D  |
| ?    | 表示查询字符串的开始   | %3F  |
| 空格 | 空格                   | %20  |
| .    | 句号                   | %2E  |
| :    | 冒号                   | %3A  |

## encodeURI() 和 decodeURI()

`encodeURI()` 函数 通过将特定字符的每个实例替换为一个、两个、三个或四个转义序列来对统一资源标识符 (URI) 进行编码 (该字符的 UTF-8 编码仅为四转义序列) 由两个 "代理" 字符组成。

`encodeURI()` 不会编码以下特殊字符：`! @ # $& \* ( ) = : / ; ? + '`，所以在使用过程中要注意这些特殊字符的存在。

`decodeURI()` 用于解析 `encodeURI()` 产生的转义字符，将其解析至原来的格式，需要注意的是只能解码 `encodeURI()` 支持的几种编码字符，如果存在不支持的字符，则不会解码。

## encodeURIComponent() 和 decodeURIComponent()

`encodeURIComponent()` 与 `encodeURI()` 一样都是将特定字符进行编码，不同的是，该方法支持的字符比 `encodeURI()` 更多，如: `? + \`等。

`encodeURIComponent()` 不会编码以下字符：`A-Z a-z 0-9 - _ . ! ~ * ' ( )`。

`decodeURIComponent()` 与 `decodeURI()` 一样，不支持解码 `encodeURIComponent()` 函数所不能编码的字符。

> 因为支持对 `\` 的转义，所以在使用 `encodeURIComponent()` 函数时建议不直接转码一整个 URL，而是转码 URL 中的查询字符串(请求参数)。

## 总结

1. `encodeURI()` 一般常用于编码整个 URI，因为整个 URI 中的合法字符都不会被编码转换。

2. `encodeURIComponent()` 方法适用于编码单个键值对(请求参数)，它可以将参数中的中文、特殊字符更多的进行转义，而不影响整个 URL。

3. `enCodeURI()` 和 `encodeURIComponent()` 对中文以及字符的编码方式一样，只是支持的字符多少的区别。默认编码字符集为 UTF-8。

:::tip
`escape` 和 `unescape` 在 MDN 的说明中已不在推荐使用该特性，所以不在说明。
:::
