---
lastUpdated: false
contributors: false
---

# 基础命令

## 创建仓库

| 命令                     | 作用                                                               |
| ------------------------ | ------------------------------------------------------------------ |
| git init                 | 初始化一个全新的仓库，拥有基础的 git 文件目录结构                  |
| git clone `<url> [name]` | 根据提供的 url 镜像一个远程仓库，name 字段为重命名镜像下来的文件夹 |

## 添加文件 add

Git 的 add 指令具备两种能力

- 将新创建的文件添加至暂存区域，并开始跟踪
- 将已修改的文件添加至暂存区域

| 命令             | 作用                                 |
| ---------------- | ------------------------------------ |
| git add `<file>` | 将文件提交到暂存区域，方便下一次提交 |

## 查看文件状态 status

<img src="/image/tools/git/command/gitstatus.png" />

| 命令          | 作用                                   |
| ------------- | -------------------------------------- |
| git status    | 查看未提交暂存的和已提交暂存的文件状态 |
| git status -s | 查看状态简览                           |

- ?? 未跟踪的文件
- A 第一次添加到暂存区域的新文件
- MM 右侧的 M 表示文件被修改来但是还没放入暂存区域，左侧的 M 表示文件被修改来并放入暂存区域
- D 文件从仓库中被移除

## 查看文件差异 diff

| 命令              | 作用                                   |
| ----------------- | -------------------------------------- |
| git diff          | 查看介于未修改和已修改文件状态时对差异 |
| git diff --cached | 查看介于暂存阶段和未修改阶段时的差异   |

## 提交更新 commit

| 命令                      | 作用                                                       |
| ------------------------- | ---------------------------------------------------------- |
| git commit -m `<text>`    | 将暂存区域文件执行快照后，提交至仓库，并返回当次快照的信息 |
| git commit -a -m `<text>` | 将未暂存对文件跳过 git add 步骤，直接暂存并提交至仓库      |

## 移除文件 rm

Git 的移除文件是从已跟踪文件清单中移除，然后提交，后续就不在跟踪该文件

> Git 的移除文件只能移除已跟踪文件

| 命令                     | 作用                                               |
| ------------------------ | -------------------------------------------------- |
| git rm `<file>`          | 将文件从跟踪清单中移除，并删除文件                 |
| git rm -f `<file>`       | 将处于已修改和暂存阶段对文件，强制移除，并删除文件 |
| git rm --cached `<file>` | 将文件从跟踪清单中移除，并保留文件                 |

## 查看提交历史 log

Git 的提交信息通过 commit 提交后，只会返回当次提交信息，如果想看之前的提交信息，就需要使用 log 指令查看日志

> 进入 git log 后，会进入一种查看终端界面，一直按回车能查看下一条，按 q 能退出查看

| 命令                    | 作用                                            |
| ----------------------- | ----------------------------------------------- |
| git log                 | 查看过往提交日志                                |
| git log -p              | 查看每次提交差异                                |
| git log --stat          | 查看每次提交的简略统计信息                      |
| git log --shortstat     | 只显示 --stat 中最后的行数修改添加移除统计      |
| git log --name-only     | 仅在提交信息后显示已修改的文件清单              |
| git log --name-status   | 显示新增、修改、删除的文件清单                  |
| git log --abbrev-commit | 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符 |
| git log --graph         | 显示 ASCII 图形表示的分支合并历史               |
| git log --pretty        | 可以指定使用不同格式的方式查看历史              |
| git log --decorate      | 查看各个分支当前所指的对象                      |
| git log --oneline       | 让提交记录在一行中显示，仅显示哈希值和提交信息  |

### 限制输出长度

通过限定输出的命令，来查看更好的日志

> --命令，除特殊情况，是可以堆叠使用 例如 --p -10

| 命令              | 作用                               |
| ----------------- | ---------------------------------- |
| -(n)              | 仅显示最近的 n 条提交              |
| --since，--after  | 仅显示指定时间之后的提交           |
| --until，--before | 仅显示指定时间之前的提交           |
| --author          | 仅显示指定作者相关的提交           |
| --committer       | 仅显示指定提交者相关的提交         |
| --grep            | 仅显示含指定关键字的提交           |
| -S                | 仅显示添加或移除来某个关键字的提交 |

## 撤销操作 restore

Git 撤销修改，主要利用 git restore 命令。

| 命令                               | 作用                                                              |
| ---------------------------------- | ----------------------------------------------------------------- |
| git restore --worktree `<file>`    | 表示撤销文件在工作区的修改(还未提交到暂存到状态， 可使用 -W 缩写) |
| git restore --staged `<file>`      | 撤销暂存区的修改，将文件状态恢复到未 add 之前(可使用 -S 缩写)     |
| git restore -s HEAD~(n) `<file>`   | 将当前工作区文件切换到 n 个 commit 版本之前                       |
| git restore -s `<commitID> <file>` | 将当前工作区文件切换到指定 commitID 的版本                        |

## 标签 tag

tag 是 git 版本库的一个标记，指向某个 commit 的指针。
tag 主要用于发布版本的管理，一个版本发布之后，我们可以为 git 打上 v1.0.1，v1.0.2...这样的标签。
tag 和 branch 有点相似，但是本质上是不同的

- tag 对应的是某次 commit ，是一个点，是不可移动的
- branch 对应的是一系列 commit，是很多点连成的一根线，有一个 HEAD 指针，通过指针来控制指向某一个 commit

| 命令                                     | 作用                                                                                  |
| ---------------------------------------- | ------------------------------------------------------------------------------------- |
| git tag `<-l，--list>`                   | 以列表形式，列出该仓库所有标签，以字母顺序列出                                        |
| git tag `<-l，--list> <char>`            | 根据字符来查找特定文字的标签。支持通配符                                              |
| git tag -a `<tag-name>` -m `<info>`      | 创建一个标签，并附加标签注释。默认给最近一次 commit 打上标签                          |
| git tag -a `<tag-name> <commitId>`       | 给指定的提交 ID 打上标签                                                              |
| git show `<tag-name>`                    | 查看指定标签的详细信息                                                                |
| git push `<remote-name><tag-name>`       | 默认情况下，git push 并不会推送标签到远程服务器。需要主动使用命令推送标签到服务器上。 |
| git push `<remote-name>` --tags          | 一次性推送多个标签到远程服务器                                                        |
| git tag -d `<tag-name>`                  | 通过标签名来删除本地标签。该删除方式并不会删除远程标签                                |
| git push `<remote-name>` -d `<tag-name>` | 根据远程仓库名称和标签名，删除远程仓库的标签                                          |
| git checkout `<tag-name>`                | 将当前的 HEAD 指针指向 该标签的 commit                                                |

> 对标签使用 checkout 检出的时候，会使仓库处于 "分离头指针" 的状态。如果做了某些更改然后提交他们，标签不会发生变化，且你的新提交不属于任何分支，处于无法访问状态。
> 所以，如果需要对标签的版本进行修改，需要根据 tag 的 commit 创建一个新分支，然后在分支上进行修改，在根据需求是否继续发布版本(创建标签)。

## 分支 branch

| 命令                                        | 作用                           |
| ------------------------------------------- | ------------------------------ |
| git branch                                  | 查看当前仓库所有分支           |
| git branch `<branch-name>`                  | 创建一个新分支                 |
| git branch -d `<branch-name>`               | 删除一个分支                   |
| git branch --merged                         | 查看哪些分支被当前分支合并     |
| git branch --no-merged                      | 查看哪些分支还未被当前分支合并 |
| git branch -vv                              | 查看所有的跟踪分支             |
| git push `<remote-name>` -d `<barnch-name>` | 删除远程仓库中的分支           |

## 操作远程仓库 remote

| 命令                                 | 作用                                                                 |
| ------------------------------------ | -------------------------------------------------------------------- |
| git remote                           | 查看远程仓库的简写，会列出执行该命令文件夹所有远程仓库的简写         |
| git remote rename <旧名称> <新名称>  | 重命名仓库名称                                                       |
| git remote -v                        | 列出该文件夹下的所有远程仓库 url                                     |
| git remote add `<remote-name> <url>` | 添加一个新的远程仓库                                                 |
| git feach `<remote-name>`            | 拉取远程仓库数据，`<remote-name>` 必须在本地具有。仅拉取数据，不合并 |
| git remote show `<remote-name>`      | 查看远程分支详细信息                                                 |
| gir remote rm `<remote-name>`        | 删除本地的远程仓库                                                   |

## 回退 reset

| 命令                              | 作用                                                      |
| --------------------------------- | --------------------------------------------------------- |
| git reset --hard `<commit_id>`    | 通过 git log 获取本地提交信息的 commit id，回退到某个版本 |
| git push -f orgin `<branch-name>` | 强制推送到主分支                                          |
